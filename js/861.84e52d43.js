"use strict";(self["webpackChunkvue_router"]=self["webpackChunkvue_router"]||[]).push([[861],{530:function(t,e,n){function a(t){return{all:t=t||new Map,on:function(e,n){var a=t.get(e);a?a.push(n):t.set(e,[n])},off:function(e,n){var a=t.get(e);a&&(n?a.splice(a.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var a=t.get(e);a&&a.slice().map((function(t){t(n)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,n)}))}}}n.d(e,{Z:function(){return i}});const l=a();var i=l},861:function(t,e,n){n.r(e),n.d(e,{default:function(){return T}});var a=n(252),l=n(577),i=n(963);const s={class:"container"},d=(0,a._)("h2",{class:"mt-5"},"購物車頁面",-1),o={class:"mt-4"},r={class:"table align-middle"},u=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"圖片"),(0,a._)("th",null,"商品名稱"),(0,a._)("th",null,"價格"),(0,a._)("th")])],-1),c={style:{width:"200px"}},p={key:0,class:"h5"},_={key:1},g={class:"h6"},h={class:"h5"},b={class:"btn-group btn-group-sm"},m=(0,a._)("button",{type:"button",class:"btn btn-outline-secondary"}," 查看更多 ",-1),v=["onClick","disabled"],w={class:"spinner-border spinner-border-sm"},y=(0,a.Uk)(" 加到購物車 "),k={class:"text-end"},f=["disabled"],C={class:"table align-middle"},D=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th"),(0,a._)("th",null,"品名"),(0,a._)("th",{style:{width:"150px"}},"數量/單位"),(0,a._)("th",null,"單價")])],-1),x=["onClick","disabled"],z={class:"input-group input-group-sm"},I={class:"input-group mb-3"},L=["onChange","onUpdate:modelValue","disabled"],$=["value"],q={class:"input-group-text",id:"basic-addon2"},U={class:"text-end"},H=(0,a._)("td",{colspan:"3",class:"text-end"},"總計",-1),K={class:"text-end"};function Y(t,e,n,Y,Z,A){return(0,a.wg)(),(0,a.iD)("div",s,[d,(0,a._)("div",o,[(0,a._)("table",r,[u,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Z.products,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id},[(0,a._)("td",c,[(0,a._)("div",{style:(0,l.j5)([{backgroundImage:`url(${t.imageUrl})`},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),(0,a._)("td",null,(0,l.zw)(t.title),1),(0,a._)("td",null,[t.price===t.origin_price?((0,a.wg)(),(0,a.iD)("div",p,(0,l.zw)(t.price)+" 元 ",1)):((0,a.wg)(),(0,a.iD)("div",_,[(0,a._)("del",g,"原價 "+(0,l.zw)(t.origin_price)+" 元",1),(0,a._)("div",h,"現在只要 "+(0,l.zw)(t.price)+" 元",1)]))]),(0,a._)("td",null,[(0,a._)("div",b,[m,(0,a._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e=>A.addToCart(t.id),disabled:Z.isLoadingItem===t.id},[(0,a.wy)((0,a._)("span",w,null,512),[[i.F8,Z.isLoadingItem===t.id]]),y],8,v)])])])))),128))])]),(0,a._)("div",k,[(0,a._)("button",{class:"btn btn-outline-danger",type:"button",onClick:e[0]||(e[0]=(...e)=>t.removeCartAll&&t.removeCartAll(...e)),disabled:0===Z.cartData.carts.length}," 清空購物車 ",8,f)]),(0,a._)("table",C,[D,(0,a._)("tbody",null,[Z.cartData.carts?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(Z.cartData.carts,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,[(0,a._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:n=>t.removeCartItem(e.id),disabled:Z.isLoadingItem===e.id}," x ",8,x)]),(0,a._)("td",null,(0,l.zw)(e.product.title),1),(0,a._)("td",null,[(0,a._)("div",z,[(0,a._)("div",I,[(0,a.wy)((0,a._)("select",{class:"form-select",onChange:n=>t.updateCartItem(e),"onUpdate:modelValue":t=>e.qty=t,disabled:Z.isLoadingItem===e.id},[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(20,(t=>(0,a._)("option",{value:t,key:`${t}+${e.id}`},(0,l.zw)(t),9,$))),64))],40,L),[[i.bM,e.qty]]),(0,a._)("span",q,(0,l.zw)(e.product.unit),1)])])]),(0,a._)("td",U,(0,l.zw)(e.product.price),1)])))),128)):(0,a.kq)("",!0)]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[H,(0,a._)("td",K,(0,l.zw)(Z.cartData.total),1)])])])])])}var Z=n(530),A={data(){return{products:[],cartData:{carts:[]},isLoadingItem:""}},methods:{getProduct(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/hsiaoi/products/all").then((t=>{this.products=t.data.products})).catch((t=>{alert(t.data.message)}))},addToCart(t,e=1){const n={product_id:t,qty:e};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/hsiaoi/cart",{data:n}).then((t=>{console.log(t)})).catch((t=>{alert(t.data.message)}))}},mounted(){this.getProduct(),Z.Z.emit("get-cart")}},M=n(744);const P=(0,M.Z)(A,[["render",Y]]);var T=P}}]);
//# sourceMappingURL=861.84e52d43.js.map